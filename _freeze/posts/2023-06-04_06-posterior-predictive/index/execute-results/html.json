{
  "hash": "a93164f1a148462f608d7665bd3ebb03",
  "result": {
    "markdown": "---\ntitle: \"Predictive Distributions\"\n---\n\n\n::: callout-note\n## Listening\n\n<iframe style=\"border-radius:12px\" src=\"https://open.spotify.com/embed/track/51zSWEFaShJCDeeb3tJdQX?utm_source=generator\" width=\"100%\" height=\"152\" frameBorder=\"0\" allowfullscreen allow=\"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture\" loading=\"lazy\">\n\n</iframe>\n:::\n\n## Loading\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggdist)\nlibrary(here)\nlibrary(ggblend)\n\nsource(here(\"_defaults.R\"))\n```\n:::\n\n\n## Prior predictive\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntibble(\n  p = runif(1e4)\n) ->\n  prior_samp\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nprior_samp |> \n  mutate(\n    pred_binom = rbinom(n(), size = 9, prob = p)\n  ) |> \n  count(pred_binom) |> \n  mutate(prob = n/sum(n)) ->\n  prior_pred\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nprior_pred |> \n  ggplot(aes(pred_binom, prob))+\n    geom_col()+\n    theme_no_y()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=576}\n:::\n:::\n\n\n## Maximum Likelihood\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntibble(\n  pred_binom = 0:9,\n  dens = dbinom(pred_binom, size = 9, prob = 6/9),\n  prob = dens\n) -> \n  ml_pred\n\nml_pred |> \n  ggplot(aes(pred_binom, prob))+\n    geom_col()+\n    theme_no_y()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=576}\n:::\n:::\n\n\n## Posterior Pred\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntibble(\n  p = seq(0, 1, length = 1000),\n  dens = dbeta(p, 6+1, 3+1)\n) |> \n  sample_n(\n    size = 1e4, \n    replace = T,\n    weight = dens\n  ) ->\n  posterior_samp\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nposterior_samp |> \n   mutate(\n    pred_binom = rbinom(n(), size = 9, prob = p)\n  ) |> \n  count(pred_binom) |> \n  mutate(prob = n/sum(n)) ->\n  posterior_pred\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nposterior_pred |> \n  ggplot(aes(pred_binom, prob))+\n    geom_col()+\n    theme_no_y()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=576}\n:::\n:::\n\n\n## Comparisons\n\n\n::: {.cell}\n\n```{.r .cell-code}\nposterior_pred |> \n  ggplot(aes(pred_binom, prob))+\n    geom_col()+\n    geom_segment(\n      data = ml_pred,\n      aes(\n        x = pred_binom-0.1,\n        xend = pred_binom-0.1,\n        yend = 0,\n        color = \"maximum likelihood\"\n      ),\n      linewidth = 2\n    )+\n    geom_segment(\n      data = prior_pred,\n      aes(\n        x = pred_binom+0.1,\n        xend = pred_binom+0.1,\n        yend = 0,\n        color = \"prior\"\n      ),\n      linewidth = 2\n    )+  \n    labs(\n      color = NULL\n    )+\n    theme_no_y()+\n    theme(\n      legend.position = \"top\"\n    )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=576}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbind_rows(\n  posterior_pred |> \n    mutate(pred = \"posterior\"),\n  ml_pred |> \n    mutate(pred = \"maximum likelihood\"),\n  prior_pred |> \n    mutate(pred = \"prior\")\n) |> \n  ggplot(aes(pred_binom, prob, fill = pred))+\n    geom_area(position = \"identity\") * \n      (blend(\"lighten\") + blend(\"multiply\", alpha = 0.5)) +\n    theme_no_y()+\n    theme(\n      legend.position = \"top\"\n    )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){width=576}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}