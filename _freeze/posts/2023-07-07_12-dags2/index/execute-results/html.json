{
  "hash": "0ab01469a9cfba247af833bee577db20",
  "result": {
    "markdown": "---\ntitle: \"DAGs part 2\"\ndate: 2023-07-07\n---\n\n\n::: callout-note\n## Listening\n\n<iframe style=\"border-radius:12px\" src=\"https://open.spotify.com/embed/track/1TfqLAPs4K3s2rJMoCokcS?utm_source=generator\" width=\"100%\" height=\"152\" frameBorder=\"0\" allowfullscreen allow=\"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture\" loading=\"lazy\">\n\n</iframe>\n:::\n\nFor part 2, I'm going to try working through this step by step like he does in the book.\n\n## Setup\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"loading libraries and defaults\"}\nlibrary(tidyverse)\nlibrary(tidybayes)\nlibrary(brms)\nlibrary(gt)\nlibrary(gtsummary)\nlibrary(patchwork)\nlibrary(ggblend)\nlibrary(marginaleffects)\nlibrary(dagitty)\nlibrary(ggdag)\nlibrary(ggrepel)\n\nsource(here::here(\"_defaults.R\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(2023-7-7)\n```\n:::\n\n\n## The data\n\nWe're looking at the `rethinking::milk` data\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata(milk, package = \"rethinking\")\n```\n:::\n\n\nLet's try some summaries. For the categorical data, I'm going to do my own custom summary, but for the numeric columns I'll just use `gtsummary::tbl_summary().`\n\nAs it turns out, just like usual when I start trying to finesse things, the code got a little intense.\n\n\n::: {#tbl-cat .cell tbl-cap='Summary of categorical variables'}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Categorical summary\"}\nmilk |> \n  select(\n    where(\n      ~!is.numeric(.x)\n    )\n  ) |> \n  pivot_longer(\n    cols = everything(),\n    names_to = \"var\",\n    values_to = \"value\"\n  ) |> \n  summarise(\n    .by = var,\n    total_groups = n_distinct(value),\n    most_common = fct_count(\n      factor(value),\n      sort = T,\n      prop = T\n      ) |> \n      slice(1)\n  ) |> \n  unnest(most_common) |> \n  gt() |> \n     cols_label(\n       var = \"Variable\",\n       total_groups = \"Total Groups\",\n       f = \"Most common\",\n       n = \"Number of most common\",\n       p = \"Proportion of most common\"\n     ) |> \n  fmt_number(\n    columns = p,\n    decimals = 2\n  )\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"drtzcvwzgn\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#drtzcvwzgn table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#drtzcvwzgn thead, #drtzcvwzgn tbody, #drtzcvwzgn tfoot, #drtzcvwzgn tr, #drtzcvwzgn td, #drtzcvwzgn th {\n  border-style: none;\n}\n\n#drtzcvwzgn p {\n  margin: 0;\n  padding: 0;\n}\n\n#drtzcvwzgn .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#drtzcvwzgn .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#drtzcvwzgn .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#drtzcvwzgn .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#drtzcvwzgn .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#drtzcvwzgn .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#drtzcvwzgn .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#drtzcvwzgn .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#drtzcvwzgn .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#drtzcvwzgn .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#drtzcvwzgn .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#drtzcvwzgn .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#drtzcvwzgn .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#drtzcvwzgn .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#drtzcvwzgn .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#drtzcvwzgn .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#drtzcvwzgn .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#drtzcvwzgn .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#drtzcvwzgn .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#drtzcvwzgn .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#drtzcvwzgn .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#drtzcvwzgn .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#drtzcvwzgn .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#drtzcvwzgn .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#drtzcvwzgn .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#drtzcvwzgn .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#drtzcvwzgn .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#drtzcvwzgn .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#drtzcvwzgn .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#drtzcvwzgn .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#drtzcvwzgn .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#drtzcvwzgn .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#drtzcvwzgn .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#drtzcvwzgn .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#drtzcvwzgn .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#drtzcvwzgn .gt_left {\n  text-align: left;\n}\n\n#drtzcvwzgn .gt_center {\n  text-align: center;\n}\n\n#drtzcvwzgn .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#drtzcvwzgn .gt_font_normal {\n  font-weight: normal;\n}\n\n#drtzcvwzgn .gt_font_bold {\n  font-weight: bold;\n}\n\n#drtzcvwzgn .gt_font_italic {\n  font-style: italic;\n}\n\n#drtzcvwzgn .gt_super {\n  font-size: 65%;\n}\n\n#drtzcvwzgn .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#drtzcvwzgn .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#drtzcvwzgn .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#drtzcvwzgn .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#drtzcvwzgn .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#drtzcvwzgn .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#drtzcvwzgn .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Variable\">Variable</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Total Groups\">Total Groups</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Most common\">Most common</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Number of most common\">Number of most common</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Proportion of most common\">Proportion of most common</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"var\" class=\"gt_row gt_left\">clade</td>\n<td headers=\"total_groups\" class=\"gt_row gt_right\">4</td>\n<td headers=\"f\" class=\"gt_row gt_center\">Ape</td>\n<td headers=\"n\" class=\"gt_row gt_right\">9</td>\n<td headers=\"p\" class=\"gt_row gt_right\">0.31</td></tr>\n    <tr><td headers=\"var\" class=\"gt_row gt_left\">species</td>\n<td headers=\"total_groups\" class=\"gt_row gt_right\">29</td>\n<td headers=\"f\" class=\"gt_row gt_center\">A palliata</td>\n<td headers=\"n\" class=\"gt_row gt_right\">1</td>\n<td headers=\"p\" class=\"gt_row gt_right\">0.03</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nComparing the code I wrote for the categorical variables to how straightforward `tbl_summary()` is kind of illustrates how useful these out-of-the-box tools can be.\n\n\n::: {#tbl-cont .cell tbl-cap='Summary of continuous variables'}\n\n```{.r .cell-code}\nmilk |> \n  select(\n    where(is.numeric)\n  ) |> \n  tbl_summary()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"feuwiyurra\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#feuwiyurra table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#feuwiyurra thead, #feuwiyurra tbody, #feuwiyurra tfoot, #feuwiyurra tr, #feuwiyurra td, #feuwiyurra th {\n  border-style: none;\n}\n\n#feuwiyurra p {\n  margin: 0;\n  padding: 0;\n}\n\n#feuwiyurra .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#feuwiyurra .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#feuwiyurra .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#feuwiyurra .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#feuwiyurra .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#feuwiyurra .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#feuwiyurra .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#feuwiyurra .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#feuwiyurra .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#feuwiyurra .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#feuwiyurra .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#feuwiyurra .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#feuwiyurra .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#feuwiyurra .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#feuwiyurra .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#feuwiyurra .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#feuwiyurra .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#feuwiyurra .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#feuwiyurra .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#feuwiyurra .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#feuwiyurra .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#feuwiyurra .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#feuwiyurra .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#feuwiyurra .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#feuwiyurra .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#feuwiyurra .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#feuwiyurra .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#feuwiyurra .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#feuwiyurra .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#feuwiyurra .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#feuwiyurra .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#feuwiyurra .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#feuwiyurra .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#feuwiyurra .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#feuwiyurra .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#feuwiyurra .gt_left {\n  text-align: left;\n}\n\n#feuwiyurra .gt_center {\n  text-align: center;\n}\n\n#feuwiyurra .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#feuwiyurra .gt_font_normal {\n  font-weight: normal;\n}\n\n#feuwiyurra .gt_font_bold {\n  font-weight: bold;\n}\n\n#feuwiyurra .gt_font_italic {\n  font-style: italic;\n}\n\n#feuwiyurra .gt_super {\n  font-size: 65%;\n}\n\n#feuwiyurra .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#feuwiyurra .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#feuwiyurra .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#feuwiyurra .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#feuwiyurra .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#feuwiyurra .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#feuwiyurra .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;Characteristic&lt;/strong&gt;\"><strong>Characteristic</strong></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;N = 29&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><strong>N = 29</strong><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">kcal.per.g</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">0.60 (0.49, 0.73)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">perc.fat</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">37 (21, 46)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">perc.protein</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">15.8 (13.0, 20.8)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">perc.lactose</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">49 (38, 60)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">mass</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">3 (2, 11)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">neocortex.perc</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">68.9 (64.5, 71.3)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Unknown</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">12</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"2\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span> Median (IQR)</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n:::\n:::\n\n\n## The initial model\n\nOk, we're going to model the kilocalories per gram of milk as the outcome, trying to explore whether or not the neocortex percentage is related.\n\n\n::: {.cell crop='true'}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"plotting code\"}\nmilk |> \n  drop_na() |> \n  ggplot(\n    aes(\n      neocortex.perc, \n      kcal.per.g,\n      color = clade,\n      fill = clade\n    )\n  )+\n    geom_point(\n      key_glyph = \"rect\"\n    )+\n    geom_text_repel(\n      aes(label = species), \n      size = 3,\n      show.legend = F\n    )+\n    theme(\n      aspect.ratio = 1\n    )\n```\n\n::: {.cell-output-display}\n![Neorcortex percentage and kcal per gram of milk](index_files/figure-html/fig-dataplot-1.png){#fig-dataplot width=576}\n:::\n:::\n\n\n### Preparing the data\n\nI won't look ahead and drop NAs when I standardize to save some space. Looks like we're logging the body mass. I'll just check that distribution real quick.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmilk |> \n  ggplot(aes(mass))+\n    stat_slab()+\n    geom_rug()+\n    labs(\n      title = \"linear scale\"\n    )+\n    theme_no_y()->\n  mass_linear\n\nmilk |> \n  ggplot(aes(mass))+\n    stat_slab()+\n    geom_rug()+\n    scale_x_log10()+\n    labs(\n      title = \"log scale\"\n    )+\n    theme_no_y()->\n  mass_log\n\nmass_linear + mass_log\n```\n\n::: {.cell-output-display}\n![Distribution of mass on a linear vs log scale](index_files/figure-html/fig-mass-1.png){#fig-mass width=960}\n:::\n:::\n\n\nYup! Looks like we should log it!\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmilk |> \n  drop_na() |> \n  mutate(\n    kcal_z = (kcal.per.g-mean(kcal.per.g))/sd(kcal.per.g),\n    neoc_z = (neocortex.perc-mean(neocortex.perc))/sd(neocortex.perc),\n    log_mass = log(mass),\n    log_mass_z = (log_mass - mean(log_mass))/sd(log_mass)\n  ) ->\n  milk_to_mod\n```\n:::\n\n\n### Fitting the model\n\nI'll fit models with both the weak priors and the stronger priors. I'm still needing to check what everything is called with `get_prior()` before I can confidently set anything.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nget_prior(\n  kcal_z ~ neoc_z,\n  data = milk_to_mod\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                   prior     class   coef group resp dpar nlpar lb ub\n                  (flat)         b                                   \n                  (flat)         b neoc_z                            \n student_t(3, -0.2, 2.5) Intercept                                   \n    student_t(3, 0, 2.5)     sigma                               0   \n       source\n      default\n (vectorized)\n      default\n      default\n```\n:::\n:::\n\n\nOk, should do the trick.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbrm(\n  kcal_z ~ neoc_z,\n  data = milk_to_mod,\n  prior = c(\n    prior(normal(0,1), class = b),\n    prior(normal(0,1), class = Intercept),\n    prior(exponential(1), class = sigma) \n  ),\n  sample_prior = T,\n  file = \"neoc_model_weak.rds\",\n  cores = 4,\n  backend = \"cmdstanr\"\n)->\n  neoc_model_weak\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbrm(\n  kcal_z ~ neoc_z,\n  data = milk_to_mod,\n  prior = c(\n    prior(normal(0,0.5), class = b),\n    prior(normal(0,0.2), class = Intercept),\n    prior(exponential(1), class = sigma) \n  ),\n  sample_prior = T,\n  file = \"neoc_model_strong.rds\",\n  cores = 4,\n  backend = \"cmdstanr\"\n)->\n  neoc_model_strong\n```\n:::\n\n\n### Prior predictive plots\n\nYou can set an option in `brm` to only sample the priors for something like this, but instead I just fit whole models to save time. This'll need to be a bit \"manual\", cause I don't think `marginaleffects::predictions()` has an option to get prior predictions.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprior_draws(neoc_model_weak) |> \n  mutate(\n    draw = row_number(),\n      priors = \"weak\"\n  ) |> \n  rowwise() |> \n  mutate(\n    pred = list(tibble(\n      neoc_z = seq(-2, 2, length = 50),\n      kcal_z = Intercept + (neoc_z * b)\n    ))\n  ) ->\n  weak_prior_predictive\n```\n:::\n\n\nAnd then the same thing for the strong priors model.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"same as above\"}\nprior_draws(neoc_model_strong) |> \n  mutate(\n    draw = row_number(),\n      priors = \"strong\"\n  ) |> \n  rowwise() |> \n  mutate(\n    pred = list(tibble(\n      neoc_z = seq(-2, 2, length = 50),\n      kcal_z = Intercept + (neoc_z * b)\n    ))\n  ) ->\n  strong_prior_predictive\n```\n:::\n\n\nI'll just sample 50 fitted lines for each model.\n\n\n::: {.cell crop='true'}\n\n```{.r .cell-code}\nbind_rows(\n  weak_prior_predictive,\n  strong_prior_predictive\n) |> \n  group_by(priors) |> \n  sample_n(50) |> \n  unnest(pred) |> \n  ggplot(aes(neoc_z, kcal_z)) +\n    geom_line(\n      aes(group = draw)\n    )+\n    facet_wrap(~priors)+\n    theme(\n      aspect.ratio = 1\n    )\n```\n\n::: {.cell-output-display}\n![prior predictive distributions](index_files/figure-html/fig-prior-pred-1.png){#fig-prior-pred width=576}\n:::\n:::\n\n\nSo, the \"weaker\" priors are \"silly\" (as McElreath puts it) because for some `noec_z` values, it's predicting `kcal_z` values as extreme as 6. And because I standardized the outcome, that's saying some `kcal_z` values are up to 6 standard deviations from the average. R actually craps out trying to give the cumulative probability!\n\n\n::: {.cell}\n\n```{.r .cell-code}\npnorm(6, mean = 0, sd = 1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1\n```\n:::\n:::\n\n\n### The Posteriors\n\nLemme compare the posterior parameter estimates for the two models.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nneoc_model_weak |> \n  gather_draws(\n    `b_.*`,\n    regex = T\n  ) |> \n  mutate(priors = \"weak\") ->\n  weak_betas\n\nneoc_model_strong |> \n  gather_draws(\n    `b_.*`,\n    regex = T\n  ) |> \n  mutate(priors = \"strong\") -> \n  strong_betas\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbind_rows(\n  weak_betas,\n  strong_betas\n) |> \n  ggplot(aes(.value, priors))+\n    stat_halfeye()+\n    facet_wrap(~.variable)\n```\n\n::: {.cell-output-display}\n![parameter estimates by model](index_files/figure-html/fig-posterior-comp-1.png){#fig-posterior-comp width=768}\n:::\n:::\n\n\nThe posterior distribution for the Intercept might be notably different, but they're still pretty comparable.\n\nLet's see the predicted values.\n\n\n::: {.cell crop='true'}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"plotting code\"}\npredictions(\n  neoc_model_strong,\n  newdata = datagrid(\n    neoc_z = seq(-2, 2, length = 50)\n  )\n) |> \n  posterior_draws() ->\n  neoc_fit1\n\nneoc_fit1 |> \n  ggplot(aes(neoc_z, draw))+\n    stat_lineribbon(\n      .width = c(\n        0.89,\n        0.7,\n        0.5\n      )\n    )+\n    scale_fill_brewer()+\n    labs(\n      title = \"kcal ~ neocortex\",\n      y = \"kcal_z\"\n    )+\n    theme(\n      aspect.ratio = 1\n    )\n```\n\n::: {.cell-output-display}\n![Posterior estimates of kcal_z](index_files/figure-html/fig-neoc-pred-1.png){#fig-neoc-pred width=576}\n:::\n:::\n\n\n## More Models\n\nOk, we're also going to fit modes for\n\n-   kcal_z \\~ log_mass_z\n\n-   kcal_z \\~ neoc_z + log_mass_z\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbrm(\n  kcal_z ~ log_mass_z,\n  data = milk_to_mod,\n  prior = c(\n    prior(normal(0,0.5), class = b),\n    prior(normal(0,0.2), class = Intercept),\n    prior(exponential(1), class = sigma) \n  ),\n  sample_prior = T,\n  file = \"mass_model.rds\",\n  cores = 4,\n  backend = \"cmdstanr\"\n)->\n  mass_model\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbrm(\n  kcal_z ~ neoc_z + log_mass_z,\n  data = milk_to_mod,\n  prior = c(\n    prior(normal(0,0.5), class = b),\n    prior(normal(0,0.2), class = Intercept),\n    prior(exponential(1), class = sigma) \n  ),\n  sample_prior = T,\n  file = \"neoc_mass_model.rds\",\n  cores = 4,\n  backend = \"cmdstanr\"\n)->\n  neoc_mass_model\n```\n:::\n\n\nWe can compare the parameters from each with some reused code from above!\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"posterior getting\"}\nmass_model |> \n  gather_draws(\n    `b_.*`,\n    regex = T\n  ) |> \n  mutate(model = \"~mass\") -> \n  mass_betas\n\nneoc_mass_model |> \n  gather_draws(\n    `b_.*`,\n    regex = T\n  ) |> \n  mutate(model = \"~neoc+mass\") -> \n  neoc_mass_betas\n\nstrong_betas |> \n  mutate(model = \"~neoc\") ->\n  neoc_betas\n```\n:::\n\n::: {.cell crop='true'}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"plotting code\"}\nbind_rows(\n  neoc_betas,\n  mass_betas,\n  neoc_mass_betas\n) |> \n  ggplot(aes(.value, model))+\n    stat_halfeye(\n      aes(fill = after_stat(x >= 0)),\n      show.legend = F\n    )+\n    facet_wrap(~.variable)+\n    theme(\n      aspect.ratio = 0.75\n    )\n```\n\n::: {.cell-output-display}\n![Comparison of parameters across models](index_files/figure-html/fig-all-param-1.png){#fig-all-param width=960}\n:::\n:::\n\n\nSo, including *both* predictors in the model amplified the effect for both of them. We can get the fitted values now\n\n\n::: {.cell crop='true'}\n\n```{.r .cell-code  code-fold=\"true\"}\npredictions(\n  neoc_mass_model,\n  newdata = datagrid(\n    neoc_z = seq(-2, 2, length = 50),\n    log_mass_z = 0\n  )\n) |> \n  posterior_draws() |>  \n  mutate(model = \"~neoc + mass\")-> \n  neoc_fit2\n\nneoc_fit1 |> \n  mutate(model = \"~neoc\")->\n  neoc_fit1\n\nbind_rows(\n  neoc_fit1,\n  neoc_fit2\n) |> \n  ggplot(aes(neoc_z, draw))+\n    stat_lineribbon(\n      .width = c(0.89,0.7, 0.5),\n      color = NA\n    )  +\n    scale_fill_brewer()+\n   labs(\n     y = \"kcal_z\",\n     subtitle = \"log_mass_z = 0\"\n   )+\n   facet_wrap(~model)+\n   theme(\n     aspect.ratio = 1\n   )\n```\n\n::: {.cell-output-display}\n![comparison of predicted values across neocortex percentage](index_files/figure-html/fig-noec-comp-1.png){#fig-noec-comp width=576}\n:::\n:::\n\n::: {.cell crop='true'}\n\n```{.r .cell-code  code-fold=\"true\"}\npredictions(\n  mass_model,\n  newdata = datagrid(\n    log_mass_z = seq(-2, 2, length = 50),\n    neoc_z = 0\n  )\n) |> \n  posterior_draws() |> \n  mutate(model = \"~mass\")->\n  mass_fit1\n\npredictions(\n  neoc_mass_model,\n  newdata = datagrid(\n    log_mass_z = seq(-2, 2, length = 50),\n    neoc_z = 0\n  )\n) |> \n  posterior_draws() |> \n  mutate(model = \"~neoc + mass\")->\n  mass_fit2\n\nbind_rows(\n  mass_fit1,\n  mass_fit2\n) |> \n  ggplot(aes(log_mass_z, draw))+\n    stat_lineribbon(\n      .width = c(0.89,0.7, 0.5),\n      color = NA\n    )  +\n    scale_fill_brewer()+\n   labs(\n     y = \"kcal_z\",\n     subtitle = \"neoc_z = 0\"\n   )+\n   facet_wrap(~model)+\n   theme(\n     aspect.ratio = 1\n   )\n```\n\n::: {.cell-output-display}\n![comparison of predicted values across bodymass](index_files/figure-html/fig-mass-comp-1.png){#fig-mass-comp width=576}\n:::\n:::\n\n\n## Why?\n\nEach predictor is correlated with the outcome, and also (strongly) correlated with each other.\n\n\n::: {.cell crop='true'}\n\n```{.r .cell-code  code-fold=\"true\"}\nmilk_to_mod |> \n  ggplot(aes(log_mass_z, kcal_z))+\n    geom_point()+\n    stat_smooth(\n      method = 'lm',\n      se = F,\n      color = ptol_blue\n    )+\n    scale_x_continuous(position = \"top\")->\n  mass_kcal\n\nmilk_to_mod |> \n  ggplot(aes(neoc_z, kcal_z))+\n    geom_point()+\n    stat_smooth(\n      method = 'lm',\n      se = F,\n      color = ptol_blue\n    )+\n    scale_x_continuous(position = \"top\")+\n    scale_y_continuous(position = \"right\")+\n  theme(\n    aspect.ratio = 1\n  )->\n  neoc_kcal\n\nmilk_to_mod |> \n  ggplot(aes(log_mass_z, neoc_z))+\n    geom_point()+\n    stat_smooth(\n      method = 'lm',\n      se = F,\n      color = ptol_blue\n    )+\n  theme(\n    aspect.ratio = 1\n  )->\n  mass_neoc\n\nlayout <- \"\nAB\nC#\n\"\n\nmass_kcal + neoc_kcal + mass_neoc + plot_layout(design = layout)\n```\n\n::: {.cell-output-display}\n![Relationship between the three variables](index_files/figure-html/fig-pairs-1.png){#fig-pairs width=480}\n:::\n:::\n\n\n### Isn't this collinearity?\n\nSo, on this point, I'm not completely sure how I should feel about the model with both body mass and neocortex percentage, since it looks like \"collinearity\" which is supposed to be 👻 spooky 👻. In the book, he gives three possible DAGs, so I'll see what the \"adjustment sets\" are like for each.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndagify(\n  kcal ~ mass,\n  kcal ~ neoc,\n  neoc ~ mass\n) |> \n  adjustmentSets(\n    outcome = \"kcal\",\n    exposure = \"neoc\",\n    effect = \"direct\"\n    )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n{ mass }\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndagify(\n  kcal ~ mass,\n  kcal ~ neoc,\n  # flipping this\n  mass ~ neoc\n) |> \n  adjustmentSets(\n    outcome = \"kcal\",\n    exposure = \"neoc\",\n    effect = \"direct\"\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n{ mass }\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndagify(\n  kcal ~ mass,\n  kcal ~ neoc,\n  mass ~ UNK,\n  neoc ~ UNK,\n  latent = \"UNK\"\n) |> \n  adjustmentSets(\n    outcome = \"kcal\",\n    exposure = \"neoc\",\n    effect = \"direct\"\n  ) \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n{ mass }\n```\n:::\n:::\n\n\nWell, they all say to get the direct effect of neocortex percentage on kcal per gram, you need to include mass... Which I can be cool with, I just need to figure out how we're thinking about collinearity now! Maybe the paper [Collinearity isn't a disease that needs curing](Collinearity isn't a disease that needs curing) is a place to start!\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}